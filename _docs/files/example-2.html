<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minha P√°gina Interativa</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
        }

        .container {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            border: 1px solid rgba(255, 255, 255, 0.18);
            max-width: 500px;
            width: 90%;
            text-align: center;
        }

        h1 {
            margin-bottom: 30px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .clock {
            font-size: 3rem;
            font-weight: bold;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 15px;
            font-family: 'Courier New', monospace;
        }

        .counter-section {
            margin: 30px 0;
        }

        .counter {
            font-size: 2rem;
            margin: 15px 0;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
        }

        button {
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            padding: 12px 25px;
            margin: 5px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.3);
        }

        button:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .input-section {
            margin: 20px 0;
        }

        input {
            padding: 12px;
            border: none;
            border-radius: 10px;
            background: rgba(255,255,255,0.9);
            color: #333;
            font-size: 1rem;
            width: 70%;
            margin: 10px;
        }

        .todo-list {
            text-align: left;
            margin: 20px 0;
        }

        .todo-item {
            background: rgba(255,255,255,0.1);
            padding: 10px;
            margin: 5px 0;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .delete-btn {
            background: rgba(255,0,0,0.3);
            padding: 5px 10px;
            font-size: 0.8rem;
        }

        .footer {
            margin-top: 30px;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        /* Estilos para se√ß√£o XSS */
        .xss-section {
            margin: 15px 0;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            border-left: 4px solid #ff6b6b;
        }

        .xss-section h4 {
            color: #ff6b6b;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .xss-section input {
            background: rgba(255,255,255,0.9);
            color: #333;
            border: 1px solid #ddd;
            margin: 5px;
        }

        #searchResult, #comments, #customHTML {
            background: rgba(0,0,0,0.1);
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            min-height: 30px;
            border: 1px dashed rgba(255,255,255,0.3);
        }
    </style>
</head>
<body>
<div class="container">
    <h1 class="pulse">üöÄ P√°gina Interativa</h1>

    <!-- Rel√≥gio em tempo real -->
    <div class="clock" id="clock"></div>

    <!-- Contador -->
    <div class="counter-section">
        <h3>Contador</h3>
        <div class="counter" id="counter">0</div>
        <button onclick="increment()">‚ûï Incrementar</button>
        <button onclick="decrement()">‚ûñ Decrementar</button>
        <button onclick="reset()">üîÑ Reset</button>
    </div>

    <!-- Lista de Tarefas -->
    <div class="input-section">
        <h3>Lista de Tarefas</h3>
        <input type="text" id="todoInput" placeholder="Digite uma tarefa..." onkeypress="handleEnter(event)">
        <button onclick="addTodo()">‚ûï Adicionar</button>
        <div class="todo-list" id="todoList"></div>
    </div>

    <!-- Gerador de Cores -->
    <div>
        <h3>Gerador de Cores</h3>
        <button onclick="changeBackgroundColor()">üé® Mudar Cor de Fundo</button>
    </div>

    <!-- SE√á√ÉO DE SIMULA√á√ÉO XSS PARA TESTES -->
    <div style="border: 2px solid #ff6b6b; border-radius: 10px; padding: 20px; margin: 20px 0; background: rgba(255,107,107,0.1);">
        <h3>‚ö†Ô∏è SIMULA√á√ÉO XSS (Para Testes de Scanner)</h3>

        <!-- XSS Refletido Simulado -->
        <div class="xss-section">
            <h4>1. XSS Refletido (Simulado)</h4>
            <input type="text" id="searchInput" placeholder="Digite algo para buscar..." onkeyup="simulateReflectedXSS()">
            <div id="searchResult"></div>

            <!-- Exemplos de payloads que um scanner deve detectar -->
            <small style="display: block; margin-top: 10px; opacity: 0.8;">
                Teste com: &lt;script&gt;alert('XSS')&lt;/script&gt; ou &lt;img src=x onerror=alert('XSS')&gt;
            </small>
        </div>

        <!-- XSS Armazenado Simulado -->
        <div class="xss-section" style="margin-top: 15px;">
            <h4>2. XSS Armazenado (Simulado)</h4>
            <input type="text" id="commentInput" placeholder="Deixe um coment√°rio...">
            <button onclick="addComment()">üí¨ Comentar</button>
            <div id="comments"></div>
        </div>

        <!-- XSS em Atributos -->
        <div class="xss-section" style="margin-top: 15px;">
            <h4>3. XSS em Atributos</h4>
            <input type="text" id="imageUrl" placeholder="URL da imagem" onchange="updateImage()">
            <br>
            <img id="dynamicImage" src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg'%3E%3C/svg%3E"
                 alt="Imagem din√¢mica" style="max-width: 100px; margin: 10px;">
        </div>

        <!-- JavaScript Injection em innerHTML -->
        <div class="xss-section" style="margin-top: 15px;">
            <h4>4. innerHTML Injection</h4>
            <input type="text" id="htmlInput" placeholder="HTML personalizado">
            <button onclick="updateHTML()">üîÑ Atualizar HTML</button>
            <div id="customHTML" style="border: 1px dashed #ccc; padding: 10px; margin: 10px 0;"></div>
        </div>
    </div>

    <div class="footer">
        Criado com HTML, CSS e JavaScript puro ‚ú®
    </div>
</div>

<script>
    // Vari√°veis globais
    let counter = 0;
    let todos = [];

    // Rel√≥gio em tempo real
    function updateClock() {
        const now = new Date();
        const timeString = now.toLocaleTimeString('pt-BR');
        document.getElementById('clock').textContent = timeString;
    }

    // Fun√ß√£o do contador
    function increment() {
        counter++;
        updateCounter();
    }

    function decrement() {
        counter--;
        updateCounter();
    }

    function reset() {
        counter = 0;
        updateCounter();
    }

    function updateCounter() {
        document.getElementById('counter').textContent = counter;
    }

    // Fun√ß√µes da lista de tarefas
    function addTodo() {
        const input = document.getElementById('todoInput');
        const todoText = input.value.trim();

        if (todoText === '') {
            alert('Digite uma tarefa!');
            return;
        }

        const todo = {
            id: Date.now(),
            text: todoText,
            completed: false
        };

        todos.push(todo);
        input.value = '';
        renderTodos();
    }

    function deleteTodo(id) {
        todos = todos.filter(todo => todo.id !== id);
        renderTodos();
    }

    function renderTodos() {
        const todoList = document.getElementById('todoList');
        todoList.innerHTML = '';

        todos.forEach(todo => {
            const todoItem = document.createElement('div');
            todoItem.className = 'todo-item';
            todoItem.innerHTML = `
                    <span>${todo.text}</span>
                    <button class="delete-btn" onclick="deleteTodo(${todo.id})">üóëÔ∏è Excluir</button>
                `;
            todoList.appendChild(todoItem);
        });
    }

    function handleEnter(event) {
        if (event.key === 'Enter') {
            addTodo();
        }
    }

    // Gerador de cores aleat√≥rias
    function changeBackgroundColor() {
        const colors = [
            'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
            'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
            'linear-gradient(135deg, #4facfe 0%, #00f2fe 100%)',
            'linear-gradient(135deg, #43e97b 0%, #38f9d7 100%)',
            'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',
            'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)',
            'linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)'
        ];

        const randomColor = colors[Math.floor(Math.random() * colors.length)];
        document.body.style.background = randomColor;
    }

    // Inicializa√ß√£o
    window.onload = function() {
        // Atualizar rel√≥gio a cada segundo
        updateClock();
        setInterval(updateClock, 1000);

        // Adicionar evento de teclado global
        document.addEventListener('keydown', function(event) {
            if (event.key === ' ') {
                event.preventDefault();
                changeBackgroundColor();
            }
        });

        console.log('üéâ P√°gina carregada com sucesso!');
        console.log('üí° Dica: Pressione ESPA√áO para mudar a cor de fundo');
    };

    // Easter egg - detectar sequ√™ncia de cliques
    let clickCount = 0;
    document.addEventListener('click', function() {
        clickCount++;
        if (clickCount === 10) {
            alert('üéâ Voc√™ descobriu o easter egg! Parab√©ns por explorar a p√°gina!');
            clickCount = 0;
        }
    });

    // ==========================================
    // SIMULA√á√ïES XSS PARA TESTES DE SCANNER
    // ==========================================

    // Array para simular coment√°rios "armazenados"
    let comments = [];

    // 1. XSS Refletido Simulado
    function simulateReflectedXSS() {
        const input = document.getElementById('searchInput').value;
        const resultDiv = document.getElementById('searchResult');

        // VULNERABILIDADE SIMULADA: Inser√ß√£o direta sem sanitiza√ß√£o
        resultDiv.innerHTML = `<p>Voc√™ pesquisou por: ${input}</p>`;

        // Log para debug do scanner
        console.log('XSS Refletido - Input:', input);
    }

    // 2. XSS Armazenado Simulado
    function addComment() {
        const input = document.getElementById('commentInput');
        const commentText = input.value.trim();

        if (commentText === '') return;

        // VULNERABILIDADE SIMULADA: Armazenar sem sanitiza√ß√£o
        comments.push({
            id: Date.now(),
            text: commentText,
            date: new Date().toLocaleString()
        });

        input.value = '';
        renderComments();
    }

    function renderComments() {
        const commentsDiv = document.getElementById('comments');
        commentsDiv.innerHTML = '';

        comments.forEach(comment => {
            const commentDiv = document.createElement('div');
            commentDiv.style.cssText = 'border: 1px solid #ddd; padding: 8px; margin: 5px 0; border-radius: 5px; background: rgba(255,255,255,0.1);';

            // VULNERABILIDADE SIMULADA: innerHTML sem sanitiza√ß√£o
            commentDiv.innerHTML = `
                    <small>${comment.date}</small><br>
                    ${comment.text}
                `;

            commentsDiv.appendChild(commentDiv);
        });

        console.log('XSS Armazenado - Coment√°rios:', comments);
    }

    // 3. XSS em Atributos
    function updateImage() {
        const url = document.getElementById('imageUrl').value;
        const img = document.getElementById('dynamicImage');

        // VULNERABILIDADE SIMULADA: Atributo sem valida√ß√£o
        img.src = url;
        img.setAttribute('title', url);

        console.log('XSS em Atributo - URL:', url);
    }

    // 4. innerHTML Injection
    function updateHTML() {
        const htmlInput = document.getElementById('htmlInput').value;
        const htmlDiv = document.getElementById('customHTML');

        // VULNERABILIDADE SIMULADA: innerHTML direto
        htmlDiv.innerHTML = htmlInput;

        console.log('innerHTML Injection - HTML:', htmlInput);
    }

    // Payloads de teste comuns (para refer√™ncia do scanner)
    const commonXSSPayloads = [
        '<script>alert("XSS")</script>',
'<img src=x onerror=alert("XSS")>',
'<svg onload=alert("XSS")>',
    'javascript:alert("XSS")',
    '<iframe src="javascript:alert(\'XSS\')">',
        '<body onload=alert("XSS")>',
        '<input type="image" src=x onerror=alert("XSS")>',
        '<details open ontoggle=alert("XSS")>',
            '<marquee onstart=alert("XSS")>',
                '"><script>alert("XSS")</script>'
                ];

                // Fun√ß√£o para testar todos os payloads (apenas log)
                function logXSSPayloads() {
                console.log('=== PAYLOADS XSS PARA TESTE ===');
                commonXSSPayloads.forEach((payload, index) => {
                console.log(`${index + 1}. ${payload}`);
                });
                }

                // Chama no carregamento para refer√™ncia
                window.addEventListener('load', () => {
                logXSSPayloads();
                });
                </script>
        </body>
</html>